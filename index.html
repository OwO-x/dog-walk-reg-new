<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Narberth Dog Walk Status</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div id="sideMenu">
    <h2><i class="fas fa-paw"></i> Narberth Dog Walks</h2>
    <a href="https://dog-walk-reg.netlify.app" class="active" aria-current="page"><i class="fas fa-home"></i> Home</a>
    <a href="#submit-status"><i class="fas fa-plus-circle"></i> Submit Status</a>
    <a href="#view-status"><i class="fas fa-list"></i> View Statuses</a>
    <a href="#map-view"><i class="fas fa-map-marked-alt"></i> Map View</a>
  </div>

  <!-- Hamburger Menu -->
  <div id="hamburgerMenu" onclick="toggleMenu()" aria-label="Toggle navigation menu">
    <div></div>
    <div></div>
    <div></div>
  </div>

  <div class="main-content">
    <h1><i class="fas fa-paw"></i> Narberth Dog Walk Status</h1>
    <p>Share your dog walking status with other owners in Narberth to help coordinate walks and avoid busy areas.</p>

    <!-- Map Container -->
    <div id="mapContainer">
      <!-- Map will be rendered here -->
    </div>

    <!-- Filter Controls -->
    <div class="filter-controls">
      <button class="filter-btn active" data-filter="all">All</button>
      <button class="filter-btn" data-filter="walking">Walking</button>
      <button class="filter-btn" data-filter="not-walking">Not Walking</button>
      <button class="filter-btn" data-filter="friendly">Friendly Dogs</button>
      <button class="filter-btn" data-filter="service">Service Dogs</button>
    </div>

    <form id="walkForm">
      <label class="form-full-width">
        Are you walking your dog?
        <select id="walkingStatus" required>
          <option value="yes">Yes, currently walking</option>
          <option value="no">No, not currently walking</option>
          <option value="planning">Planning to walk soon</option>
        </select>
      </label>

      <label class="form-full-width">
        Location in Narberth:
        <div class="map-controls">
          <input type="text" id="location" required maxlength="50" placeholder="E.g. Narberth Moor, Bloomfield Park" list="narberthLocations" />
          <datalist id="narberthLocations">
            <option value="Narberth Moor">
            <option value="Bloomfield Park">
            <option value="Narberth High Street">
            <option value="Narberth Castle">
            <option value="Narberth Playing Fields">
            <option value="Narberth Woods">
            <option value="Narberth Dog Park">
          </datalist>
          <button type="button" id="selectOnMapBtn" class="map-btn" aria-label="Select location on map"><i class="fas fa-map-marker-alt"></i> Select on Map</button>
        </div>
      </label>

      <div id="mapSelectionContainer"></div>

      <label>
        Walk Time:
        <input type="time" id="walkTime" required />
      </label>

      <label>
        Dog Status
        <select id="dogStatus" required>
          <option value="Friendly">Friendly with dogs and people</option>
          <option value="Friendly">Friendly with dogs</option>
          <option value="Friendly">Friendly with people</option>
          <option value="Nervous">Nervous/Shy</option>
          <option value="Not Friendly">Not friendly (please keep distance)</option>
          <option value="Service Dog">Service Dog (do not disturb)</option>
          <option value="In Training">In Training</option>
        </select>
      </label>

      <label>
        Safety Status
        <select id="safetyOptions" required>
          <option value="safe">Safe area</option>
          <option value="unsafe">Unsafe (recent incidents)</option>
          <option value="unknown">Unknown safety</option>
          <option value="busy">Very busy area</option>
        </select>
      </label>

      <label class="form-full-width">
        Other Notes (optional):
        <textarea id="otherNotes" maxlength="200" placeholder="E.g., 'We'll be wearing red bandanas', 'Avoid the north side of the Moor'"></textarea>
      </label>

      <button type="submit"><i class="fas fa-paper-plane"></i> Submit Status</button>
    </form>

    <!-- Loading Spinner -->
    <div id="loadingSpinner" class="spinner"></div>

    <!-- Dark Mode Toggle -->
    <div class="toggle-container" aria-label="Dark mode toggle">
      <i class="fas fa-sun toggle-icon"></i>
      <input type="checkbox" id="toggleModeCheckbox" aria-label="Toggle dark mode">
      <label for="toggleModeCheckbox"></label>
      <i class="fas fa-moon toggle-icon"></i>
    </div>

    <h2><i class="fas fa-list-ul"></i> Current Dog Walk Statuses in Narberth</h2>
    <div id="statusList">
      <!-- Status cards will be inserted here -->
    </div>

    <div id="emptyState" class="text-center mt-20 hidden">
      <i class="fas fa-dog" style="font-size: 3rem; color: var(--primary-color);"></i>
      <h3>No walk statuses found in Narberth</h3>
      <p>Be the first to submit a dog walk status in our town!</p>
    </div>
  </div>

  <!-- Notification -->
  <div id="notification" class="notification" role="alert" aria-live="assertive">
    <i class="fas fa-check-circle"></i>
    <span>Status submitted successfully!</span>
  </div>

  <!-- Google Maps API -->
  <script
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCTLsji9XOlgHK-YUPrQYSfLPB5NoerVWY&libraries=places&callback=initMaps"
    async
    defer
  ></script>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>

  <!-- Your custom JavaScript -->
  <script src="script.js"></script>
</body>
</html>
